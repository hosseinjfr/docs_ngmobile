.. sectionauthor:: Дмитрий Барышников <dmitry.baryshnikov@nextgis.ru>

.. _ngmobile_share:

Выгрузка данных
===============

.. _ngmobile_export_vector:

GeoJSON
-------

Для того, чтобы экспортировать данные векторного слоя, следует открыть Дерево слоев (см. :numref:`ngmobile_main_activity_pic`, п.1). Далее необходимо нажать кнопку вызова контекстного меню нужного слоя (см. :numref:`ngmobile_layer_tree_pic`, п.5). При выборе пункта контекстного меню "Поделиться" (см. :numref:`ngmobile_layer_tree_pic`, п.6) откроется стандартное системное меню выбора способа передачи экспортированных данных (например, по почте, облачное хранилище файлов, карта памяти и т.п.). Окно выбора представлено на :numref:`ngmobile_share_pic`. 

.. figure:: _static/ngmobile_share.png
   :name: ngmobile_share_pic
   :align: center
   :height: 10cm
   
   Окно выбора способа передачи экспортированных данных.

При выборе одного из предложенных вариантов данные из слоя будут записаны в формат :term:`GeoJSON` (:term:`система координат` Web Mercator, EPSG:3857) и сохранены через выбранное приложение. Файлу присваивается название, соответствующее имени слоя.

Ниже представлены некоторые варианты передачи данных (их доступность зависит от того, какие приложения установлены на устройстве):

* Можно отправить данные в качестве прикрепленного файла через Gmail или другое приложение для отправки электронной почты.
* Можно загрузить файл на Google Диск/Dropbox/другой облачный сервер, а затем поделиться им с коллегами.
* Можно отправить файл на другое устройство через Bluetooth или Доступ через LAN.
* Можно сохранить файл в память устройства.

.. warning::
   Во многих версиях Android, для того чтобы появилась возможность сохранения файла в память устройства, необходимо, чтобы на устройстве  был установлен какой-либо файловый менеджер, например ES Explorer или аналогичный.

.. _ngmobile_export_attachments:

Выгрузка вложений
-------------------

К каждому объекту векторного слоя в NextGIS Mobile можно прикрепить одну или несколько фотографий. Фотографии 
хранятся отдельно в виде файлов и при экспорте добавляются в архив слоя, для каждого 
объекта в архиве создается своя папка с вложениями, папке присваивается то же название, соответствующее `ID` объекта.

Пример записи:

(4:10000002.jpg,10000000.jpg,10000001.jpg,10000003.jpg)

Расшифровка:

К данному объекту прикреплены 4 фотографии с соответствующими именами. Эти фотографии 
находятся в папке, название которой соответствует `ID` объекта.

.. _ngmobile_export_GPX:

Выгрузка треков в GPX
----------------------

Для выгрузки треков следует сначала найти групповой слой "Мои треки" в Дереве слоев. Затем нужно нажать на кнопку контекстного меню, как показано на :numref:`ngmobile_layer_tree_traks_pic`, и выбрать пункт "Список".
 
В результате будет открыт список записанных треков (см. :numref:`ngmobile_tracks_list_gpx_pic`). Если несколько треков записывались в
один день, то треки будут разбиты по сессиям. Если один трек записывался в течение нескольких дней, то записанный трек будет разбит на на части по дням, в которые происходила запись трека.

Следует выбрать трек, поставив напротив флажок, после чего кнопки в верхней панели инструментов будут активированы (см. :numref:`ngmobile_layer_gpx_selected_pic`).

Для того чтобы экспортировать трек, следует нажать на кнопку "Поделиться" (см. :numref:`ngmobile_layer_gpx_selected_pic`, п.4). В результате данные, содержащиеся в выбранном треке будут сохранены в формате GPX и экспортированы через выбранное приложение.
